<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>
			{% block title %}Propar
			{% endblock %}
		</title>
		{# Run `composer require symfony/webpack-encore-bundle`
				           and uncomment the following Encore helpers to start using Symfony UX #}
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css">
		{% block stylesheets %}
			{#{{ encore_entry_link_tags('app') }}#}
		{% endblock %}

		{% block javascripts %}
			{#{{ encore_entry_script_tags('app') }}#}
		{% endblock %}

	</head>


	<body>

		
<div class="d-flex flex-row">

			<div class="d-flex flex-column vh-100 flex-shrink-0 p-3 text-white bg-dark sticky-top" style="width: 250px;">
				<a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
					<svg class="bi me-2" width="40" height="32"></svg>
					<span class="fs-4">Propar</span>
				</a>
				<hr>
				<ul class="nav nav-pills flex-column mb-auto">
					<li class="nav-item">
						<a href="#" class="nav-link active" aria-current="page">
							<i class="fa fa-home"></i>
							<span class="ms-2">Home</span>
						</a>
					</li>
					<li>
						<a href="{{ path('app_task_new') }}" class="nav-link text-white">
							<i class="fa fa-dashboard"></i>
							<span class="ms-2">Dashboard</span>
						</a>
					</li>
				</ul>
				<hr>
				{% if app.user %}
					<div class="dropdown">
						<a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
							<img src="https://github.com/mdo.png" alt="" width="32" height="32" class="rounded-circle me-2">
							<strong>
								{{ app.user.prenom }}
								[{{ app.user.roles|join }}]</strong>
						</a>
						<ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">
							<li>
								<hr class="dropdown-divider">
							</li>
							<li>
								<a class="dropdown-item" href="#">Sign out</a>
							</li>
						</ul>
					</div>
				{% endif %}
			</div>
		
		<div>

			
				{# <div class="container"> #}
			
				{% block body %}{% endblock %}
			

			
		</div>
	</div>	
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script>

		$(document).ready(function () {

  // fonction qui cache le champs select  
  function Display_none() {
    document.getElementById("task_client").style.display = "none";
  };

  // fonction qui affiche les change select
  function Display_block() {
    document.getElementById("task_client").style.display = "block";
  };


  //selection du champs form adresse
  let adresse = document.querySelector('#task_client');

  // fonction qui ce lance a chaque fois qu'on appuie sur une touche dans le champ adresse
  $(adresse).keypress(function () {

    //valeur du champ adresse
    let test = $(this).val();


    //affichage de l'url dans la console aprés chaque touche
    console.log(url);

    //appel de l'api Fetch
    fetch(url, { method: 'get' }).then(response => response.json()).then(result => {

      // affichage des resultat aprés chaque touche dans la console 
      console.log(result.features);


      //afficher directement le select avec 5 proposition
      $('#monselect').attr('size', 5);

      // remplissage de la div select a chaque résultat             
      document.getElementById('monselect').innerHTML =
        `<option value="` + result.features[0].properties.label + `">"` + result.features[0].properties.label + `"</option>
                <option value="`+ result.features[1].properties.label + `">"` + result.features[1].properties.label + `"</option>
        <option value="`+ result.features[2].properties.label + `">"` + result.features[2].properties.label + `"</option>
        <option value="`+ result.features[3].properties.label + `">"` + result.features[3].properties.label + `"</option>
        <option value="`+ result.features[4].properties.label + `">"` + result.features[4].properties.label + `"</option>`;
      
        //fonction qui remplis le champs adresse aprés un clique sur un select
      $('#monselect').change(function () {
        $("#task_client").val(this.value);
        
      });


    });


  });


});

		
		</script>

	</body>
</html>

